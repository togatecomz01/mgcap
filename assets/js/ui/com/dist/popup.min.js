"use strict";$(document).ready(function(){!function(){var s=null,n=null,a='a[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), [role="button"], [tabindex]:not([tabindex="-1"])';function i(){var t=s&&document.contains(s)?s:n&&document.contains(n)?n:function(){var e=document.querySelector('#loginId, #user_id, #userid, input[name="userId"], input[name="id"], input[type="text"].login')||document.querySelector('#loginPw, #password, input[name="password"], input[type="password"]');return e||((e=document.querySelector("#btnLogin, .btn-login, a.btn-login, button.btn-login")||document.querySelector('a[href*="login"], button[onclick*="login"], a[onclick*="login"]'))?e:(e=document.querySelector("main "+a)||document.querySelector(a))||null)}();if(t&&document.contains(t)){var o=0;!function e(){o++;try{"function"==typeof t.scrollIntoView&&t.scrollIntoView({block:"nearest",inline:"nearest"}),t.focus()}catch(e){}document.activeElement!==t&&o<3&&setTimeout(e,60)}()}}function t(e){var t=$(e).closest('a[href], button, input, select, textarea, label, [role="button"], [tabindex]');t.length&&(t.closest(".layerPopup, [role='alert'], [role='alertdialog'], [aria-modal='true'], .ui-dialog, [role='dialog']").length||(s=t.get(0)))}function l(o){if(o&&document.contains(o)){var n=0;!function e(){n++;var t=function(e){if(!e)return null;var t=e.querySelector("#confirm_yes, #confirm_no")||e.querySelector("[data-confirm-yes], [data-confirm-no]");return t||((t=e.querySelector(a))?t:(e.hasAttribute("tabindex")||e.setAttribute("tabindex","-1"),e))}(o);try{t.focus()}catch(e){}document.activeElement!==t&&n<4&&setTimeout(e,60)}()}}document.addEventListener("pointerdown",function(e){t(e.target)},!0),document.addEventListener("mousedown",function(e){t(e.target)},!0),document.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||t(e.target)},!0);var u=[];function c(e){if(e){for(var t=u.length-1;0<=t;t--)if(u[t].el===e)return void l(e);u.push({el:e,lastFocusInside:null}),l(e)}}function d(e){if(e){for(var t=u.length-1;0<=t;t--)if(u[t].el===e){u.splice(t,1);break}var o=Array.prototype.slice.call(document.querySelectorAll(".layerPopup.on, .layerPopup.active,.pop-content.alert, .alert, .confirm, .layerAlert,.message, .messagePop, .modalAlert,.ui-dialog, [role='alertdialog'], [role='dialog'][aria-modal='true']")).filter(function(e){if(!e||!document.contains(e))return!1;var t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility});if(o.length){for(var n=o[o.length-1],a=null,r=u.length-1;0<=r;r--)if(u[r].el===n&&u[r].lastFocusInside&&document.contains(u[r].lastFocusInside)){a=u[r].lastFocusInside;break}if(a){try{a.focus()}catch(e){}setTimeout(function(){try{a.focus()}catch(e){}},0)}else l(n)}else i()}}function p(o){if(o&&o.length){var n=0;!function e(){n++;var t=function(){var e=o.find(a).filter(":visible").first();if(e.length)return e;var t=o.find(".pop-area").first();return t.length||(t=o.find(".pop-content").first()),t.length||(t=o),t.is("[tabindex]")||t.attr("tabindex","-1"),t}();try{t.get(0).focus()}catch(e){}document.activeElement!==t.get(0)&&n<4&&setTimeout(e,60)}()}}document.addEventListener("focusin",function(){var e=document.activeElement;if(e&&e!==document.body&&e!==document.documentElement){var t=function(e){return e?e.closest(".layerPopup.on, .layerPopup.active,.pop-content.alert, .alert, .confirm, .layerAlert,.message, .messagePop, .modalAlert,.ui-dialog, [role='dialog'], [role='alertdialog'], [aria-modal='true']"):null}(e);t?function(e,t){if(e&&t){for(var o=u.length-1;0<=o;o--)if(u[o].el===e)return u[o].lastFocusInside=t;u.push({el:e,lastFocusInside:t})}}(t,e):n=e}}),window.MutationObserver&&(new MutationObserver(function(e){for(var t=0;t<e.length;t++){var o=e[t];if("attributes"===o.type&&"class"===o.attributeName){var n=o.target;if(n&&1===n.nodeType&&n.matches(".layerPopup, .pop-content.alert, .alert, .confirm, .layerAlert, .message, .messagePop, .modalAlert, .ui-dialog, [role='dialog'], [role='alertdialog'], [aria-modal='true']")){var a=o.oldValue||"",r=-1!==a.indexOf("on")||-1!==a.indexOf("active"),i=n.classList.contains("on")||n.classList.contains("active");!r&&i?c(n):r&&!i&&setTimeout(function(){d(n)},0)}}}}).observe(document.body,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),new MutationObserver(function(e){e.forEach(function(e){e.addedNodes&&e.addedNodes.length&&Array.prototype.forEach.call(e.addedNodes,function(e){e&&1===e.nodeType&&e.matches&&e.matches(".pop-content.alert, .alert, .confirm, .layerAlert, .message, .messagePop, .modalAlert, [role='alertdialog'], [role='dialog'][aria-modal='true']")&&c(e)}),e.removedNodes&&e.removedNodes.length&&Array.prototype.forEach.call(e.removedNodes,function(e){e&&1===e.nodeType&&e.matches&&e.matches(".pop-content.alert, .alert, .confirm, .layerAlert, .message, .messagePop, .modalAlert, [role='alertdialog'], [role='dialog'][aria-modal='true'], .layerPopup")&&setTimeout(function(){d(e)},0)})})}).observe(document.body,{childList:!0,subtree:!0}));var f={initPopup:function(e){var t=$("#"+e);t.length&&(t.addClass("on"),t.find(".pop-content").scrollTop(0),$("body, .contentWrap").css("overflow","hidden"),p(t),requestAnimationFrame(function(){p(t)}),c(t.get(0)))},openPopup:function(e){this.initPopup(e)},openModal:function(e){this.initPopup(e)},openMenu:function(e){this.initPopup(e)},closePopup:function(e){var t=document.getElementById(e);if(t&&t.classList.remove("on"),this.fkSelAndPopupResetOverflow(),t&&t.classList.contains("full")){var o=t.querySelector(".pop-header");o&&(o.style.position="")}this.fkSelAndPopupResetOverflow(),setTimeout(function(){t?d(t):i()},50)},fkSelAndPopupResetOverflow:function(){var e=0<$(".layerPopup.on").length,t=0<$(".stove-option-layer.on").length;e||t||($("body, .contentWrap").css("overflow",""),$(".pop-area, .pop-content").removeAttr("tabindex"),setTimeout(function(){$(".layerPopup.toggleUp").removeClass("active")},10))}},m={btmAti:function(e){var t=$("#"+e);if(t.length){var o=t.find(".pop-content");t.toggleClass("active"),t.hasClass("active")?(o.scrollTop(0),o.attr("tabindex","-1"),setTimeout(function(){try{o.get(0).focus()}catch(e){}},0),setTimeout(function(){try{o.get(0).focus()}catch(e){}},60),c(t.get(0))):(o.removeAttr("tabindex"),d(t.get(0)))}}};$(document).on("change","input, select, textarea",function(){var e=$('label[for="'+this.id+'"]'),t=e.data("popup-open");t&&(s=e.get(0)||this,f.openPopup(t))}),$(document).on("click",function(e){var t=$(e.target),o=t.closest("[data-popup-open]");if(o.length)return s=o.get(0),f.openPopup(o.data("popup-open"));var n=t.closest("[data-modal-open]");if(n.length)return s=n.get(0),f.openModal(n.data("modal-open"));var a=t.closest("[data-menu-open]");if(a.length)return s=a.get(0),f.openMenu(a.data("menu-open"));var r=t.closest("[data-popup-close]");if(r.length)return f.closePopup(r.data("popup-close"));var i=t.closest("[data-btm-toggle]");if(i.length)return s=i.get(0),m.btmAti(i.data("btm-toggle"));var l=t.closest(".layerPopup.btmSheet");l.length&&t.is(l)&&(l.removeClass("active").find(".pop-content").removeAttr("tabindex"),f.closePopup(l.attr("id")))}),window.MutationObserver&&new MutationObserver(function(e){for(var t=0;t<e.length;t++){var o=e[t];if("attributes"===o.type&&"class"===o.attributeName){var n=o.target;if(n&&n.classList&&n.classList.contains("layerPopup")){var a=-1!==(o.oldValue||"").indexOf("on"),r=n.classList.contains("on");!a&&r&&(p($(n)),c(n))}}}}).observe(document.body,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),window.MutationObserver&&new MutationObserver(function(e){for(var t=0;t<e.length;t++){var o=e[t];if("attributes"===o.type&&"class"===o.attributeName){var n=o.target;if(n&&n.classList&&n.classList.contains("layerPopup")){var a=-1!==(o.oldValue||"").indexOf("on"),r=n.classList.contains("on");a&&!r&&setTimeout(function(){d(n)},50)}}}}).observe(document.body,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),window.popupL=f,window.btmShtTL=m,window.fkSelAndPopupResetOverflow=f.fkSelAndPopupResetOverflow}()});
//# sourceMappingURL=popup.min.js.map
