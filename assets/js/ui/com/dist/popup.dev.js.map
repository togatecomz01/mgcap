{"version":3,"sources":["popup.js"],"names":["$","document","ready","DEBUG","lastTriggerEl","lastActiveEl","FOCUSABLE","log","console","apply","arguments","e","getFallbackFocusEl","el","querySelector","restoreFocusBack","backEl","contains","tries","attempt","scrollIntoView","block","inline","focus","activeElement","setTimeout","rememberTrigger","target","$cand","closest","length","get","addEventListener","key","getLayerContainer","firstFocusableIn","container","hasAttribute","setAttribute","getOpenLayers","nodes","Array","prototype","slice","call","querySelectorAll","filter","n","cs","window","getComputedStyle","display","visibility","focusIntoLayer","layerStack","pushLayer","i","push","lastFocusInside","markLastFocusInside","focusEl","popLayer","splice","openLayers","top","last","k","ae","body","documentElement","layer","observeLayerOpenClose","MutationObserver","classObs","mutations","m","type","attributeName","nodeType","matches","oldVal","oldValue","wasOpen","indexOf","isOpen","classList","observe","subtree","attributes","attributeOldValue","attributeFilter","domObs","muts","forEach","addedNodes","node","removedNodes","childList","focusIntoPopup","$target","pick","$firstFocusable","find","first","$el","is","attr","popupL","initPopup","id","addClass","scrollTop","css","requestAnimationFrame","openPopup","openModal","openMenu","closePopup","_target","getElementById","remove","fkSelAndPopupResetOverflow","header","style","position","isPopupOpen","isSelectOpen","removeAttr","removeClass","btmShtTL","btmAti","$contentWrap","toggleClass","hasClass","on","$label","popupId","data","$t","$openBtn","$modalBtn","$menuBtn","$closeBtn","$btmToggleBtn","$dimLayer","observeLegacyLayerPopupOpen","obs","observeLegacyLayerPopupClose"],"mappings":"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","sourcesContent":["$(document).ready(function () {\n  (function () {\n    var DEBUG = false;\n\n    // ���������� �˾��� �� Ʈ����(��ư/��ǲ/��)\n    var lastTriggerEl = null;\n\n    /* =========================================================\n       [2026-01-13] �߰� #A: ���������� ��Ŀ���� �ִ� ���(���� �˷� ���)\n       - Ŭ�� ���� �ߴ� �˷��� lastTriggerEl�� ���� �� ������ lastActiveEl�� ����\n    ========================================================= */\n    var lastActiveEl = null;\n\n    // ��Ŀ�� ������ ��� �ĺ� ������ (button ����)\n    var FOCUSABLE =\n      'a[href], button:not([disabled]), input:not([disabled]):not([type=\"hidden\"]), ' +\n      'select:not([disabled]), textarea:not([disabled]), [role=\"button\"], ' +\n      '[tabindex]:not([tabindex=\"-1\"])';\n\n    function log() {\n      if (!DEBUG) return;\n      try { console.log.apply(console, arguments); } catch (e) {}\n    }\n\n    /* =========================================================\n       [2026-01-13] �߰� #B: ������ ���� �˷����� \"���� ��\" ���� fallback ��Ŀ��\n       - lastTriggerEl / lastActiveEl�� ������ ����� �̵�\n       - ������Ʈ�� �°� selector �켱������ �ణ ��Ƶ�\n    ========================================================= */\n    function getFallbackFocusEl() {\n      // 1) �α��� ȭ���̶�� ���̵�/��� �Է��� �ֿ켱\n      var el =\n        document.querySelector('#loginId, #user_id, #userid, input[name=\"userId\"], input[name=\"id\"], input[type=\"text\"].login') ||\n        document.querySelector('#loginPw, #password, input[name=\"password\"], input[type=\"password\"]');\n\n      if (el) return el;\n\n      // 2) �α��� ��ư/��ũ(�ؽ�Ʈ ����� �����ϴ� class/id �켱)\n      el =\n        document.querySelector('#btnLogin, .btn-login, a.btn-login, button.btn-login') ||\n        document.querySelector('a[href*=\"login\"], button[onclick*=\"login\"], a[onclick*=\"login\"]');\n\n      if (el) return el;\n\n      // 3) ����/�������� ù ��Ŀ�� ���� ���\n      el =\n        document.querySelector('main ' + FOCUSABLE) ||\n        document.querySelector(FOCUSABLE);\n\n      return el || null;\n    }\n\n    /* =========================================================\n       [2026-01-15] ���� ���� �Լ�(�˾� \"���� ����\"������ ���)\n       - ��Ģ: ���̾ �ϳ��� ���� ��(=������ ����)�� \"�θ� Ʈ����\"�� ����\n    ========================================================= */\n    function restoreFocusBack() {\n      var backEl =\n        (lastTriggerEl && document.contains(lastTriggerEl)) ? lastTriggerEl :\n        (lastActiveEl && document.contains(lastActiveEl)) ? lastActiveEl :\n        getFallbackFocusEl();\n\n      if (!backEl || !document.contains(backEl)) return;\n\n      var tries = 0;\n      (function attempt() {\n        tries++;\n        try {\n          if (typeof backEl.scrollIntoView === \"function\") {\n            backEl.scrollIntoView({ block: \"nearest\", inline: \"nearest\" });\n          }\n          backEl.focus();\n        } catch (e) {}\n        if (document.activeElement === backEl) return;\n        if (tries < 3) setTimeout(attempt, 60);\n      })();\n    }\n\n    /* =========================================================\n       [2026-01-16] START (���� �۾�)\n        �ٽ� ��ǥ: \"�˾� �ȿ��� confirm/alert ���̾ �ߴ� 2�� �˾�\"�� �������� �ذ�\n       ---------------------------------------------------------\n       1) ���̾�(�˾�/confirm/alert)�� �������� ����\n          - ����: �ش� ���̾� ���η� ��Ŀ�� ����\n          - ����: �Ʒ� ���̾�� ���� (���̾ ������ restoreFocusBack)\n       2) ���� �ҽ� �ִ� Ȱ��:\n          - restoreFocusBack() �״�� ��� (��, ���̾ 0���� ���� ȣ��ǵ��� ����)\n          - focusIntoPopup() �״�� ��� (layerPopup ���� �� ����)\n          - ���� click �ڵ鷯/closePopup ����\n       3) ���� #G(�˷� �������� restoreFocusBack ȣ��)�� 2�� �������� Ʀ�� �����̶� ����/��ü\n    ========================================================= */\n\n    /* ---------------------------------------------\n       #E(���� ����) : data-* �� ����(Ŭ����/onclick) Ʈ���ŵ� lastTriggerEl�� ����\n       - �˾�/�˷� ���� Ŭ���� Ʈ���ŷ� ����� ����\n       - click���� ���� ��� ���� ĸó(pointerdown/mousedown/keydown) ���\n    --------------------------------------------- */\n    function rememberTrigger(target) {\n      var $cand = $(target).closest(\n        'a[href], button, input, select, textarea, label, [role=\"button\"], [tabindex]'\n      );\n      if (!$cand.length) return;\n\n      // �˾�/�˷� ���� Ŭ���� Ʈ���ŷ� ����� ����(�ݱ�/Ȯ�� ��ư ��)\n      if ($cand.closest(\".layerPopup, [role='alert'], [role='alertdialog'], [aria-modal='true'], .ui-dialog, [role='dialog']\").length) return;\n\n      lastTriggerEl = $cand.get(0);\n    }\n    document.addEventListener(\"pointerdown\", function (e) { rememberTrigger(e.target); }, true);\n    document.addEventListener(\"mousedown\", function (e) { rememberTrigger(e.target); }, true);\n    document.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \") rememberTrigger(e.target);\n    }, true);\n\n    /* ---------------------------------------------\n       [���̾� �Ǻ�] : \"�˾�/confirm/alert\" �����̳� �ĺ�\n       - ����û �˾�: .layerPopup.on\n       - confirm/alert: .pop-content.alert (����), .confirm, [role='alertdialog'] ��\n    --------------------------------------------- */\n    function getLayerContainer(el) {\n      if (!el) return null;\n      return el.closest(\n        \".layerPopup.on, .layerPopup.active,\" +                 // ���� �˾�\n        \".pop-content.alert, .alert, .confirm, .layerAlert,\" +  // confirm/alert �迭(������Ʈ ����)\n        \".message, .messagePop, .modalAlert,\" +\n        \".ui-dialog, [role='dialog'], [role='alertdialog'], [aria-modal='true']\"\n      );\n    }\n\n    /* ---------------------------------------------\n       [���̾� ���� ù ��Ŀ��] : confirm�� ��ư �켱\n    --------------------------------------------- */\n    function firstFocusableIn(container) {\n      if (!container) return null;\n\n      // ����: confirm_yes/no �� ������ �ֿ켱\n      var el =\n        container.querySelector(\"#confirm_yes, #confirm_no\") ||\n        container.querySelector(\"[data-confirm-yes], [data-confirm-no]\");\n      if (el) return el;\n\n      el = container.querySelector(FOCUSABLE);\n      if (el) return el;\n\n      // ����: �����̳� ��ü\n      if (!container.hasAttribute(\"tabindex\")) container.setAttribute(\"tabindex\", \"-1\");\n      return container;\n    }\n\n    /* ---------------------------------------------\n       [�����ִ� ���̾� ���] : ���� �� ���� ���� �Ǵܿ�\n    --------------------------------------------- */\n    function getOpenLayers() {\n      var nodes = Array.prototype.slice.call(\n        document.querySelectorAll(\n          \".layerPopup.on, .layerPopup.active,\" +\n          \".pop-content.alert, .alert, .confirm, .layerAlert,\" +\n          \".message, .messagePop, .modalAlert,\" +\n          \".ui-dialog, [role='alertdialog'], [role='dialog'][aria-modal='true']\"\n        )\n      );\n\n      return nodes.filter(function (n) {\n        if (!n || !document.contains(n)) return false;\n        var cs = window.getComputedStyle(n);\n        return cs.display !== \"none\" && cs.visibility !== \"hidden\";\n      });\n    }\n\n    /* ---------------------------------------------\n       [���̾� ���η� ��Ŀ�� ����] (��õ� ����)\n    --------------------------------------------- */\n    function focusIntoLayer(container) {\n      if (!container || !document.contains(container)) return;\n\n      var tries = 0;\n      (function attempt() {\n        tries++;\n        var el = firstFocusableIn(container);\n        try { el.focus(); } catch (e) {}\n\n        if (document.activeElement === el) return;\n        if (tries < 4) setTimeout(attempt, 60);\n      })();\n    }\n\n    /* ---------------------------------------------\n       [���̾� ����] : 2�� �˾� ��Ŀ�� ���͸� ���� ó��\n    --------------------------------------------- */\n    var layerStack = []; // { el: HTMLElement, lastFocusInside: HTMLElement|null }\n\n    function pushLayer(container) {\n      if (!container) return;\n\n      // �ߺ� push ����\n      for (var i = layerStack.length - 1; i >= 0; i--) {\n        if (layerStack[i].el === container) {\n          focusIntoLayer(container);\n          return;\n        }\n      }\n\n      layerStack.push({ el: container, lastFocusInside: null });\n      focusIntoLayer(container);\n    }\n\n    function markLastFocusInside(container, focusEl) {\n      if (!container || !focusEl) return;\n\n      for (var i = layerStack.length - 1; i >= 0; i--) {\n        if (layerStack[i].el === container) {\n          layerStack[i].lastFocusInside = focusEl;\n          return;\n        }\n      }\n\n      // ���ÿ� ������(���Ž÷� ���ڱ� �� ���̾�) push�ϰ� ���\n      layerStack.push({ el: container, lastFocusInside: focusEl });\n    }\n\n    function popLayer(container) {\n      if (!container) return;\n\n      // ���ÿ��� ����\n      for (var i = layerStack.length - 1; i >= 0; i--) {\n        if (layerStack[i].el === container) {\n          layerStack.splice(i, 1);\n          break;\n        }\n      }\n\n      // ���� �Ŀ��� ���̾ ���������� -> ���� �� ���̾�� ����\n      var openLayers = getOpenLayers();\n\n      if (openLayers.length) {\n        var top = openLayers[openLayers.length - 1];\n\n        // top ���̾ lastFocusInside�� ������ �켱 ���\n        var last = null;\n        for (var k = layerStack.length - 1; k >= 0; k--) {\n          if (layerStack[k].el === top && layerStack[k].lastFocusInside && document.contains(layerStack[k].lastFocusInside)) {\n            last = layerStack[k].lastFocusInside;\n            break;\n          }\n        }\n\n        if (last) {\n          try { last.focus(); } catch (e) {}\n          setTimeout(function () { try { last.focus(); } catch (e) {} }, 0);\n        } else {\n          focusIntoLayer(top);\n        }\n        return;\n      }\n\n      // ���̾ �ϳ��� ������ -> ���������� �θ� Ʈ���ŷ� ����\n      restoreFocusBack();\n    }\n\n    /* ---------------------------------------------\n       ? focusin ��� ��ü: ���̾� ���δ� ���ÿ� ��� / ���̾� ���� lastActiveEl ���\n       - (���� \"�˾� ���δ� ������� ����\" ���� ����)\n    --------------------------------------------- */\n    document.addEventListener(\"focusin\", function () {\n      var ae = document.activeElement;\n      if (!ae || ae === document.body || ae === document.documentElement) return;\n\n      var layer = getLayerContainer(ae);\n      if (layer) {\n        markLastFocusInside(layer, ae);\n        return;\n      }\n\n      lastActiveEl = ae;\n    });\n\n    /* ---------------------------------------------\n       ? ���̾� ����/���� ���� (class ��� + DOM �߰�/���� ���)\n    --------------------------------------------- */\n    (function observeLayerOpenClose() {\n      if (!window.MutationObserver) return;\n\n      // 1) class ���(on/active) ����\n      var classObs = new MutationObserver(function (mutations) {\n        for (var i = 0; i < mutations.length; i++) {\n          var m = mutations[i];\n          if (m.type !== \"attributes\" || m.attributeName !== \"class\") continue;\n\n          var el = m.target;\n          if (!el || el.nodeType !== 1) continue;\n\n          // ���̾� �ĺ��� ó��\n          if (!el.matches(\n            \".layerPopup, .pop-content.alert, .alert, .confirm, .layerAlert, .message, .messagePop, .modalAlert, \" +\n            \".ui-dialog, [role='dialog'], [role='alertdialog'], [aria-modal='true']\"\n          )) continue;\n\n          var oldVal = m.oldValue || \"\";\n          var wasOpen = (oldVal.indexOf(\"on\") !== -1) || (oldVal.indexOf(\"active\") !== -1);\n          var isOpen = el.classList.contains(\"on\") || el.classList.contains(\"active\");\n\n          if (!wasOpen && isOpen) {\n            // ����: ���η� ��Ŀ�� ����\n            pushLayer(el);\n          } else if (wasOpen && !isOpen) {\n            // ����: �Ʒ� ���̾� or �θ�� ����\n            setTimeout(function () { popLayer(el); }, 0);\n          }\n        }\n      });\n\n      classObs.observe(document.body, {\n        subtree: true,\n        attributes: true,\n        attributeOldValue: true,\n        attributeFilter: [\"class\"]\n      });\n\n      // 2) DOM �߰�/���� ���� (confirm�� remove �Ǵ� Ÿ��)\n      var domObs = new MutationObserver(function (muts) {\n        muts.forEach(function (m) {\n          // added\n          if (m.addedNodes && m.addedNodes.length) {\n            Array.prototype.forEach.call(m.addedNodes, function (node) {\n              if (!node || node.nodeType !== 1) return;\n\n              if (node.matches && node.matches(\n                \".pop-content.alert, .alert, .confirm, .layerAlert, .message, .messagePop, .modalAlert, [role='alertdialog'], [role='dialog'][aria-modal='true']\"\n              )) {\n                pushLayer(node);\n              }\n            });\n          }\n\n          // removed\n          if (m.removedNodes && m.removedNodes.length) {\n            Array.prototype.forEach.call(m.removedNodes, function (node) {\n              if (!node || node.nodeType !== 1) return;\n\n              if (node.matches && node.matches(\n                \".pop-content.alert, .alert, .confirm, .layerAlert, .message, .messagePop, .modalAlert, [role='alertdialog'], [role='dialog'][aria-modal='true'], .layerPopup\"\n              )) {\n                setTimeout(function () { popLayer(node); }, 0);\n              }\n            });\n          }\n        });\n      });\n\n      domObs.observe(document.body, { childList: true, subtree: true });\n    })();\n\n    /* =========================================================\n       [2026-01-16] END (���� �۾�)\n    ========================================================= */\n\n    // �˾� ���η� ��Ŀ�� �̵� (���� �Լ� �ִ� Ȱ�� �״�� ����)\n    function focusIntoPopup($target) {\n      if (!$target || !$target.length) return;\n\n      function pick() {\n        var $firstFocusable = $target\n          .find(FOCUSABLE)\n          .filter(\":visible\")\n          .first();\n\n        if ($firstFocusable.length) return $firstFocusable;\n\n        var $el = $target.find(\".pop-area\").first();\n        if (!$el.length) $el = $target.find(\".pop-content\").first();\n        if (!$el.length) $el = $target;\n\n        if (!$el.is(\"[tabindex]\")) $el.attr(\"tabindex\", \"-1\");\n        return $el;\n      }\n\n      var tries = 0;\n      (function attempt() {\n        tries++;\n        var $el = pick();\n        try { $el.get(0).focus(); } catch (e) {}\n\n        if (document.activeElement === $el.get(0)) return;\n        if (tries < 4) setTimeout(attempt, 60);\n      })();\n    }\n\n    var popupL = {\n      /** �˾� �ʱ�ȭ **/\n      initPopup: function (id) {\n        var $target = $(\"#\" + id);\n        if (!$target.length) return;\n\n        $target.addClass(\"on\");\n        $target.find(\".pop-content\").scrollTop(0);\n        $(\"body, .contentWrap\").css(\"overflow\", \"hidden\");\n\n        log(\"initPopup:\", id);\n\n        // ���� ��Ŀ�� ���� �״�� ���\n        focusIntoPopup($target);\n\n        // Ŭ�� ��Ŀ�� �ǵ��� ������ 2��\n        requestAnimationFrame(function () {\n          focusIntoPopup($target);\n        });\n\n        // [2026-01-16] ���̾� ���ÿ��� ���(���� �� ���� push)\n        // - closePopup�� �ƴ϶� class ��۷� ������ ���̽��� ������ observer�� ��κ� ó��������,\n        //   ���⼭�� �����ϰ� push(�ߺ��� pushLayer�� ����)\n        pushLayer($target.get(0));\n      },\n\n      openPopup: function (id) { this.initPopup(id); },\n      openModal: function (id) { this.initPopup(id); log(\"openModal:\", id); },\n      openMenu: function (id) { this.initPopup(id); log(\"openMenu:\", id); },\n\n      /** �˾� �ݱ� **/\n      closePopup: function (id) {\n        var _target = document.getElementById(id);\n        if (_target) _target.classList.remove(\"on\");\n\n        this.fkSelAndPopupResetOverflow();\n\n        if (_target && _target.classList.contains(\"full\")) {\n          var header = _target.querySelector(\".pop-header\");\n          if (header) header.style.position = \"\";\n        }\n\n        this.fkSelAndPopupResetOverflow();\n\n        // [2026-01-16] �˾� ������ \"���̾� pop\"���� ó��\n        // - popLayer�� ���� ���̾� ���������� ��������,\n        //   �ƹ��͵� ������ restoreFocusBack()���� �θ� ����\n        setTimeout(function () {\n          if (_target) popLayer(_target);\n          else restoreFocusBack(); // ������\n        }, 50);\n      },\n\n      fkSelAndPopupResetOverflow: function () {\n        var isPopupOpen = $(\".layerPopup.on\").length > 0;\n        var isSelectOpen = $(\".stove-option-layer.on\").length > 0;\n\n        if (!isPopupOpen && !isSelectOpen) {\n          $(\"body, .contentWrap\").css(\"overflow\", \"\");\n          $(\".pop-area, .pop-content\").removeAttr(\"tabindex\");\n\n          setTimeout(function () {\n            $(\".layerPopup.toggleUp\").removeClass(\"active\");\n          }, 10);\n        }\n      }\n    };\n\n    var btmShtTL = {\n      btmAti: function (id) {\n        var $target = $(\"#\" + id);\n        if (!$target.length) return;\n\n        var $contentWrap = $target.find(\".pop-content\");\n        $target.toggleClass(\"active\");\n\n        log(\"btmAti:\", id);\n\n        if ($target.hasClass(\"active\")) {\n          $contentWrap.scrollTop(0);\n          $contentWrap.attr(\"tabindex\", \"-1\");\n          setTimeout(function () { try { $contentWrap.get(0).focus(); } catch (e) {} }, 0);\n          setTimeout(function () { try { $contentWrap.get(0).focus(); } catch (e) {} }, 60);\n\n          // [2026-01-16] ���ҽ�Ʈ�� ���̾� ���(�ʿ� ��)\n          pushLayer($target.get(0));\n        } else {\n          $contentWrap.removeAttr(\"tabindex\");\n\n          // [2026-01-16] ������ pop\n          popLayer($target.get(0));\n        }\n      }\n    };\n\n    // �� + change �� �˾� ���� ���̽� (���� ����)\n    $(document).on(\"change\", \"input, select, textarea\", function () {\n      var $label = $('label[for=\"' + this.id + '\"]');\n      var popupId = $label.data(\"popup-open\");\n      if (!popupId) return;\n\n      lastTriggerEl = $label.get(0) || this;\n      popupL.openPopup(popupId);\n    });\n\n    // Ŭ������ ���ݴ� ���̽� (���� ����)\n    $(document).on(\"click\", function (e) {\n      var $t = $(e.target);\n\n      var $openBtn = $t.closest(\"[data-popup-open]\");\n      if ($openBtn.length) {\n        lastTriggerEl = $openBtn.get(0);\n        return popupL.openPopup($openBtn.data(\"popup-open\"));\n      }\n\n      var $modalBtn = $t.closest(\"[data-modal-open]\");\n      if ($modalBtn.length) {\n        lastTriggerEl = $modalBtn.get(0);\n        return popupL.openModal($modalBtn.data(\"modal-open\"));\n      }\n\n      var $menuBtn = $t.closest(\"[data-menu-open]\");\n      if ($menuBtn.length) {\n        lastTriggerEl = $menuBtn.get(0);\n        return popupL.openMenu($menuBtn.data(\"menu-open\"));\n      }\n\n      var $closeBtn = $t.closest(\"[data-popup-close]\");\n      if ($closeBtn.length) return popupL.closePopup($closeBtn.data(\"popup-close\"));\n\n      var $btmToggleBtn = $t.closest(\"[data-btm-toggle]\");\n      if ($btmToggleBtn.length) {\n        lastTriggerEl = $btmToggleBtn.get(0);\n        return btmShtTL.btmAti($btmToggleBtn.data(\"btm-toggle\"));\n      }\n\n      // ���ҽ�Ʈ dim Ŭ�� �� �ݱ� (���� ����)\n      var $dimLayer = $t.closest(\".layerPopup.btmSheet\");\n      if ($dimLayer.length && $t.is($dimLayer)) {\n        $dimLayer.removeClass(\"active\").find(\".pop-content\").removeAttr(\"tabindex\");\n        popupL.closePopup($dimLayer.attr(\"id\"));\n      }\n    });\n\n    /* =========================================================\n       [2026-01-13] �߰� #D: ���Ž�(Ŭ����/onclick)�� ������ layerPopup ��Ŀ�� ����(����)\n       - ���� ����� ���� �ʱ� ���� .layerPopup.on \"����\"�� ����\n       - [2026-01-16]  ���⼭�� ���� ���� �� focusIntoPopup + pushLayer�� ����\n    ========================================================= */\n    (function observeLegacyLayerPopupOpen() {\n      if (!window.MutationObserver) return;\n\n      var obs = new MutationObserver(function (mutations) {\n        for (var i = 0; i < mutations.length; i++) {\n          var m = mutations[i];\n          if (m.type !== \"attributes\" || m.attributeName !== \"class\") continue;\n\n          var el = m.target;\n          if (!el || !el.classList) continue;\n          if (!el.classList.contains(\"layerPopup\")) continue;\n\n          var oldVal = m.oldValue || \"\";\n          var wasOpen = oldVal.indexOf(\"on\") !== -1;\n          var isOpen = el.classList.contains(\"on\");\n\n          if (!wasOpen && isOpen) {\n            focusIntoPopup($(el));\n            // [2026-01-16] ���� push\n            pushLayer(el);\n          }\n        }\n      });\n\n      obs.observe(document.body, {\n        subtree: true,\n        attributes: true,\n        attributeOldValue: true,\n        attributeFilter: [\"class\"]\n      });\n    })();\n\n    /* ===== [2026-01-15] START =====\n       #F ���Ž� ���� ����(���� closePopup �� ���� class�� ���� ���)\n       - .layerPopup.on �� ������ ���� popLayer() ����\n       - (���� restoreFocusBack ���) ���� ��Ģ���� �Ʒ� ���̾�/�θ� ����\n    ===== */\n    (function observeLegacyLayerPopupClose() {\n      if (!window.MutationObserver) return;\n\n      var obs = new MutationObserver(function (mutations) {\n        for (var i = 0; i < mutations.length; i++) {\n          var m = mutations[i];\n          if (m.type !== \"attributes\" || m.attributeName !== \"class\") continue;\n\n          var el = m.target;\n          if (!el || !el.classList) continue;\n          if (!el.classList.contains(\"layerPopup\")) continue;\n\n          var oldVal = m.oldValue || \"\";\n          var wasOpen = oldVal.indexOf(\"on\") !== -1;\n          var isOpen = el.classList.contains(\"on\");\n\n          if (wasOpen && !isOpen) {\n            setTimeout(function () { popLayer(el); }, 50);\n          }\n        }\n      });\n\n      obs.observe(document.body, {\n        subtree: true,\n        attributes: true,\n        attributeOldValue: true,\n        attributeFilter: [\"class\"]\n      });\n    })();\n    /* ===== [2026-01-15] END ===== */\n\n\n    /* =========================================================\n       [2026-01-16] START  (���� �۾�)\n        ���� #G(�˷� �������� restoreFocusBack ȣ��) ����/��ü\n       - ����: confirm(�˷�) ������ \"�θ� Ʈ����\"�� �ƴ϶� \"�Ʒ� ���̾�(����û �˾�)\"�� ���� ��\n       - ������ observeLayerOpenClose()�� DOM remove/class ����� ������ popLayer()�� ó����\n    ========================================================= */\n    // (�ǵ������� �����)  �� ���� observeGenericAlertClose() ������ ����/�ּ� ó��\n    /* =========================================================\n       [2026-01-16] END (���� �۾�)\n    ========================================================= */\n\n    // ���� ����\n    window.popupL = popupL;\n    window.btmShtTL = btmShtTL;\n    window.fkSelAndPopupResetOverflow = popupL.fkSelAndPopupResetOverflow;\n  })();\n});\n"],"file":"popup.dev.js"}